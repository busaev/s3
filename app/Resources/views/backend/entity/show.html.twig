{% extends 'backend/base.html.twig' %}

{% block body %}
    
    <div class="row">
        <div class="col-lg-12">
            {{ wo_render_breadcrumbs({separator: '', listClass: "breadcrumb margin-top-20"}) }}                  
        </div>
    </div>
        
    <div class="row">
        <div class="col-lg-12">            
            <div id="entities-actions" style="z-index: 10;">                
                <ul>
                    <li>
                        <a href="{{ path('backend_entity_list', {'entityCode': entityCode}) }}" class="btn btn-default">{{ 'Back to the list'|trans({}, "backend") }}</a>
                    </li>
                    <li>
                        <a href="{{ path('backend_entity_edit', { 'entityCode': entityCode, 'id': entity.entity.id }) }}" class="btn btn-info">{{ 'Edit'|trans({}, "backend") }}</a>
                    </li>
                    <li>
                        {{ form_start(delete_form) }}
                            <input type="submit" value="{{ 'Delete'|trans({}, "backend") }}" class="btn btn-danger delete-form">
                        {{ form_end(delete_form) }}
                    </li>
                </ul>
            </div>                    
        </div>
    </div>
    
    {% include 'backend/flash_messages.html.twig' %}
            
    <div class="row">
        <div class="col-lg-12">

        <h1>{{ 'Viewing'|trans({}, "backend") }}</h1>

        <table class="table table-hover table-striped">
            <tbody>
                {% for field in entity.fields %}
                    <tr>
                        <th>{{entity.titles[field]|trans({}, "backend")}}</th>
                        <td>
                            {% if entity.dataTypes[field] == 'string' %}
                                <td>{{entity.entity[field]|raw }}</td>
                            {% elseif entity.dataTypes[field] == 'array' %}
                                <td>
                                    {% if entity.entity[field] is iterable %}
                                        {{ entity.entity[field]|join(', ') }}
                                    {% endif %}    
                                </td>
                            {% elseif entity.dataTypes[field] == 'boolean' %}
                                <td>
                                    {% if entity.entity[field] == 1 %}
                                        <i class="fa fa-check-square-o"></i>
                                    {% else %}
                                        <i class="fa fa-square-o"></i>
                                    {% endif %}
                                </td>
                            {% else %}
                                <td>{{ entity.entity[field] }}</td>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

        </div>
    </div>
{% endblock %}


{% block stylesheets %}
    {% stylesheets '../app/Resources/public/backend/css/common.css' 
                   '../app/Resources/public/backend/css/entities.css' 
      filter='cssrewrite' output="css/compiled/backend.css" %}
        <link href="{{ asset_url }}" rel="stylesheet" />
    {% endstylesheets %}
{% endblock stylesheets %}


{% block javascripts %}
    <script>
        $(document).ready(function() {
            $(".wysiwyg").summernote();
        });
        $(".delete-form").click(function() {
            if(confirm("{{ 'Are you sure?'|trans({}, "backend") }}")) {
                return true;
            }
            return false;
        });
    </script>
{% endblock javascripts %}